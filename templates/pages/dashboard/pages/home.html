{% extends 'pages/dashboard/base.html' %}

{% load webpack_static from webpack_loader %}

{% block content %}
  <div class="row">
    <div class="col-md-12">
      <div class="main-card add-organisation-card p-4 mt-5">
        <div class="ocard-left">
          <div class="ocard-avatar">
            <img src="{% webpack_static 'images/icons/profile.jpg' %}" alt="{{ request.user }}" />
          </div>
          <div class="ocard-name">
            <h4>{{ request.user.get_username }}</h4>
            <span>Welcome</span>
          </div>
        </div>
        <div class="ocard-right">
          <button type="button" class="pe-4 ps-4 co-main-btn min-width px-2">Approve Organisation</button>
        </div>
      </div>
      <div class="main-card mt-4">
        <div class="dashboard-wrap-content">
          <div class="dashboard-report-content pt-4">
            <div class="row">
              <!-- Pending Requests -->
              <div class="col-xl-3 col-lg-6 col-md-6">
                <div class="dashboard-report-card purple">
                  <div class="card-content">
                    <div class="card-content">
                      <span class="card-title fs-6">Pending Request{{ event_requests_pending.count|pluralize }}</span>
                      <span class="card-sub-title fs-3">{{ event_requests_pending.count|default:'0' }}</span>
                      <div class="d-flex align-items-center">
                        <span><i class="ti ti-notification"></i></span>
                        <span class="font-12 color-body text-nowrap ms-2">Awaiting Approval</span>
                      </div>
                    </div>
                    <div class="card-media">
                      <i class="ti ti-building-airport"></i>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Active Organisations -->
              <div class="col-xl-3 col-lg-6 col-md-6">
                <div class="dashboard-report-card red">
                  <div class="card-content">
                    <div class="card-content">
                      <span class="card-title fs-6">Active Organisation{{ clients.count|pluralize }}</span>
                      <span class="card-sub-title fs-3">{{ clients.count|default:'0' }}</span>
                      <div class="d-flex align-items-center">
                        <span><i class="ti ti-check"></i></span>
                        <span class="font-12 color-body text-nowrap ms-2">Fully Onboarded</span>
                      </div>
                    </div>
                    <div class="card-media">
                      <i class="ti ti-building"></i>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Managed Events -->
              <div class="col-xl-3 col-lg-6 col-md-6">
                <div class="dashboard-report-card info">
                  <div class="card-content">
                    <div class="card-content">
                      <span class="card-title fs-6">Managed Events</span>
                      <span class="card-sub-title fs-3">32</span>
                      <div class="d-flex align-items-center">
                        <span><i class="ti ti-calendar-event"></i></span>
                        <span class="font-12 color-body text-nowrap ms-2">Across All Tenants</span>
                      </div>
                    </div>
                    <div class="card-media">
                      <i class="ti ti-calendar"></i>
                    </div>
                  </div>
                </div>
              </div>
              <!-- Support Tickets -->
              <div class="col-xl-3 col-lg-6 col-md-6">
                <div class="dashboard-report-card success">
                  <div class="card-content">
                    <div class="card-content">
                      <span class="card-title fs-6">Support Requests</span>
                      <span class="card-sub-title fs-3">5</span>
                      <div class="d-flex align-items-center">
                        <span><i class="ti ti-messages"></i></span>
                        <span class="font-12 color-body text-nowrap ms-2">Open Issues</span>
                      </div>
                    </div>
                    <div class="card-media">
                      <i class="ti ti-headset"></i>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- end row -->
          </div>
        </div>
      </div>
    </div>
    <div class="col-12">
      <div class="row py-md-5 py-3">
        <div class="col-md-8 col-12">
          <table id="event-requests" class="table table-striped table-bordered">
            <thead>
              <tr>
                <th>Full Name</th>
                <th>Email</th>
                <th>Phone</th>
                <th>Subdomain</th>
                <th>Plan</th>
                <th>Status</th>
                <th>Created</th>
                <th>Action</th>
              </tr>
            </thead>
            <tbody>
              {% for row in event_requests %}
                <tr>
                  <td>{{ row.full_name|title }}</td>
                  <td>{{ row.email }}</td>
                  <td>{{ row.phone }}</td>
                  <td>{{ row.subdomain }}.ticketless.io</td>
                  <td>{{ row.plan.name }}</td>
                  <td>{{ row.get_status_display }}</td>
                  <td>{{ row.created_at }}</td>
                  <td>
                    <button class="btn btn-sm btn-primary" type="button" data-bs-toggle="offcanvas" data-bs-target="#eventCanvas" aria-controls="offcanvasBottom" data-id="{{ row.id }}">View</button>
                  </td>
                </tr>
              {% endfor %}
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </div>
{% endblock %}
<div class="main-card mt-4">
  <div class="d-flex flex-wrap justify-content-between align-items-center border_bottom p-4">
    <div class="dashboard-date-wrap d-flex flex-wrap justify-content-between align-items-center"></div>
    <div class="rs">
      <div class="btn-group" role="group" aria-label="Basic radio toggle button group">
        <input type="radio" class="btn-check" name="btnradio" id="btnradio1" />
        <label class="btn btn-outline-primary" for="btnradio1">Monthly</label>
        <input type="radio" class="btn-check" name="btnradio" id="btnradio2" checked="" />
        <label class="btn btn-outline-primary" for="btnradio2">Weekly</label>
        <input type="radio" class="btn-check" name="btnradio" id="btnradio3" />
        <label class="btn btn-outline-primary" for="btnradio3">Dailty</label>
      </div>
    </div>
  </div>
  <div class="item-analytics-content p-4 ps-1 pb-2">
    <div id="views-graphic"></div>
  </div>
</div>
